(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{39:function(e,t,a){e.exports=a(74)},44:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(33),c=a.n(i),o=a(8),s=(a(44),a(15)),l=a.n(s),m=a(19),h=a(2),u=a(3),d=a(5),p=a(4),b=a(6),v=a(13),k=a(34);a(48).config();var f=new(function(){function e(){Object(h.a)(this,e),this.auth0=new k.a.WebAuth({domain:"dev-rh9lpgdj.auth0.com",audience:"https://dev-rh9lpgdj.auth0.com/userinfo",clientID:"riYMLk9TDLKlMGHiZ5ZveTmFRIhvv15l",redirectUri:"http://localhost:8081/callback",responseType:"token id_token",scope:"openid profile email activity"}),this.getProfile=this.getProfile.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.signIn=this.signIn.bind(this),this.signOut=this.signOut.bind(this)}return Object(u.a)(e,[{key:"getProfile",value:function(){return this.profile}},{key:"getIdToken",value:function(){return this.idToken}},{key:"isAuthenticated",value:function(){return(new Date).getTime()<this.expiresAt}},{key:"signIn",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var e=this;return new Promise((function(t,a){e.auth0.parseHash((function(n,r){return n?a(n):r&&r.idToken?(e.setSession(r),void t()):a(n)}))}))}},{key:"setSession",value:function(e){this.idToken=e.idToken,this.profile=e.idTokenPayload,this.expiresAt=1e3*e.idTokenPayload.exp}},{key:"signOut",value:function(){this.auth0.logout({returnTo:"http://localhost:8081",clientID:"riYMLk9TDLKlMGHiZ5ZveTmFRIhvv15l"})}},{key:"silentAuth",value:function(){var e=this;return new Promise((function(t,a){e.auth0.checkSession({},(function(n,r){if(n)return a(n);e.setSession(r),t()}))}))}}]),e}());var g=Object(v.f)((function(e){return r.a.createElement("nav",{className:"navbar navbar-dark bg-primary fixed-top mb-4"},r.a.createElement(o.b,{className:"navbar-brand",to:"/"},"Google Book Search App"),f.isAuthenticated()&&r.a.createElement("div",null,r.a.createElement(o.b,{className:"btn btn-dark",id:"Search",to:"/search"},"Search"),r.a.createElement(o.b,{className:"btn btn-dark",id:"Saved",to:"/saved"},"Saved")),!f.isAuthenticated()&&r.a.createElement("button",{className:"btn btn-dark",id:"navSignInBtn",onClick:f.signIn},"Sign In"),f.isAuthenticated()&&r.a.createElement("div",{id:"navSignOutBtn"},r.a.createElement("label",{className:"mr-2 text-white"},f.getProfile().name),r.a.createElement("button",{className:"btn btn-dark",onClick:function(){f.signOut(),e.history.replace("/")}},"Sign Out")))})),E=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container mobileReady"},!f.isAuthenticated()&&r.a.createElement("div",null,r.a.createElement("h1",null,"Please Sign In"),r.a.createElement("button",{className:"btn btn-dark",onClick:f.signIn},"Sign In")),f.isAuthenticated()&&r.a.createElement("div",null,r.a.createElement("h1",{className:"mr-2 text-white"},"Welcome ",f.getProfile().name,"!"),r.a.createElement(o.b,{to:"/search",className:"btn btn-primary"},"Search For Books"),r.a.createElement("span",null," "),r.a.createElement(o.b,{to:"/saved",className:"btn btn-primary"},"Your Saved Books")))}}]),t}(n.Component),y=a(12),N=a.n(y),O=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(l.a.mark((function e(){var t,a,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.handleAuthentication();case 2:t=f.getProfile(),a={name:t.name,email:t.email||"",password:t.password||"",idToken:t.idToken||""},N.a.post("/user",a).then((function(e){})).catch((function(e){return console.log(e)})).finally((function(){n.props.history.replace("/")}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("p",null,"Loading profile...")}}]),t}(n.Component),j=Object(v.f)(O),S=(a(71),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={books:[]},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"card mb-3 animated fadeInDownBig",key:Math.random()},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-md-4"},this.props.imageLinks?r.a.createElement("img",{src:this.props.imageLinks[0].smallThumbnail,className:"card-img img-thumbnail",alt:this.props.title}):r.a.createElement("img",{src:"./stock.jpg",className:"card-img img-thumbnail",alt:this.props.title})),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("h5",{className:"card-title"},"Title: ",this.props.title),r.a.createElement("p",{className:"card-text"},r.a.createElement("small",{className:"text-muted"},this.props.subtitle))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("button",{className:"btn btn-primary m-1",onClick:function(){return e.props.handleRemoveClick(e.props.title)}},"Remove"),r.a.createElement("a",{href:this.props.previewLink,className:"btn btn-primary m-1",target:"_blank",rel:"noopener noreferrer"},"View"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},this.props.authors?r.a.createElement("div",null,r.a.createElement("p",null,"Authors:"),this.props.authors.map((function(e){return r.a.createElement("p",{key:Math.random()},e)}))):r.a.createElement("div",null)))))))}}]),t}(n.Component)),w=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).getBooks=function(){var e=f.getProfile().name;N.a.get("/user/".concat(e)).then((function(e){console.log(e.data),a.setState({books:e.data})})).catch((function(e){return console.log(e)}))},a.handleRemoveClick=function(e){console.log("remove Button clicked "+e),N.a.post("/removeUserBook",{name:f.getProfile().name,title:e}).then((function(e){console.log(e),a.getBooks()})).catch((function(e){return console.log(e)}))},a.state={books:[]},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getBooks()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container mobileReady"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},this.state.books.length?r.a.createElement("div",null,this.state.books.map((function(t){return r.a.createElement(S,Object.assign({},t,{location:"saved",handleRemoveClick:e.handleRemoveClick,getBooks:e.getBooks,key:Math.random()}))}))):r.a.createElement("div",null,r.a.createElement("h1",null,"No Books Found")))))}}]),t}(n.Component),C=a(37),M=a(38),A=(a(72),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={books:[]},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return!1===this.props.saved?r.a.createElement("div",{className:"card mb-3",key:Math.random(),id:this.props.title},r.a.createElement("div",{className:"row no-gutters",key:Math.random()},r.a.createElement("div",{className:"col-md-4",key:Math.random()},this.props.imageLinks?r.a.createElement("img",{src:this.props.imageLinks.smallThumbnail,className:"card-img img-thumbnail",alt:this.props.title,key:Math.random()}):r.a.createElement("img",{src:"./stock.jpg",className:"card-img img-thumbnail",alt:this.props.title,key:Math.random()})),r.a.createElement("div",{className:"col-md-8",key:Math.random()},r.a.createElement("div",{className:"card-body",key:Math.random()},r.a.createElement("div",{className:"row",key:Math.random()},r.a.createElement("div",{className:"col-md-8",key:Math.random()},r.a.createElement("h5",{className:"card-title",key:Math.random()},"Title: ",this.props.title),r.a.createElement("p",{className:"card-text",key:Math.random()},r.a.createElement("small",{className:"text-muted"},this.props.subtitle))),r.a.createElement("div",{className:"col-md-4",key:Math.random()},r.a.createElement("button",{key:Math.random(),className:"btn btn-primary m-1",onClick:function(){return e.props.handleSaveClick(e.props)}},"Save"),r.a.createElement("a",{href:this.props.previewLink,className:"btn btn-primary m-1",target:"_blank",rel:"noopener noreferrer",key:Math.random()},"View"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12",key:Math.random()},this.props.authors?r.a.createElement("div",null,r.a.createElement("p",{key:Math.random()},"Authors:"),this.props.authors.map((function(e){return r.a.createElement("p",{key:Math.random()},e)}))):r.a.createElement("div",{key:Math.random()}))))))):r.a.createElement("div",{className:"text-center animated fadeIn"},r.a.createElement("h3",null,this.props.title," has been Saved!"))}}]),t}(n.Component)),I=(a(73),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleSaveClick=function(e){console.log(e);var t=e.title,n=e.subtitle,r=e.authors,i=e.publisher,c=e.publishedDate,o=e.previewLink,s=e.imageLinks,l=e.description;N.a.post("/savebook",{title:t,subtitle:n,authors:r,publisher:i,publishedDate:c,previewLink:o,imageLinks:s,description:l,user:f.getProfile()}).then((function(e){var n=[];a.state.books.forEach((function(e){e.title===t?(e.saved=!0,n.push(e)):n.push(e)})),a.setState({books:n})})).catch((function(e){return console.log(e)}))},a.handleClick=function(e){console.log(a.state.search),N.a.get("/getbooks/".concat(a.state.search)).then((function(e){console.log(e);var t;t=e.data.map((function(e){return e.volumeInfo.saved=!1,e.volumeInfo})),a.setState({books:Object(M.a)(t),search:""})})).catch((function(e){return console.log(e)}))},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(C.a)({},n,r))},a.state={books:[],search:""},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container mobileReady"},r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"form col-md-10"},r.a.createElement("label",{htmlFor:"search"},"Search"),r.a.createElement("input",{type:"text",className:"form-control",id:"search",name:"search",value:this.state.search,onChange:this.handleInputChange,placeholder:"Search Title"})),r.a.createElement("div",{className:"col-md-2 align-self-end"},r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.handleClick},"Submit"))),this.state.books.length?r.a.createElement("div",null,this.state.books.map((function(t){return r.a.createElement(A,Object.assign({},t,{location:"search",handleSaveClick:e.handleSaveClick,key:Math.random()}))}))):r.a.createElement("div",null,r.a.createElement("h1",null,"No Books Found")))}}]),t}(n.Component)),x=Object(v.f)(I);var T=function(e){var t=e.component,a=e.path;return r.a.createElement(v.b,{path:a,render:function(){return f.isAuthenticated()?r.a.createElement(t,null):(console.log(f.isAuthenticated()),f.signIn(),r.a.createElement("div",null))}})},B=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={checkingSession:!0},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/callback"!==this.props.location.pathname){e.next=3;break}return this.setState({checkingSession:!1}),e.abrupt("return");case 3:return e.prev=3,e.next=6,f.silentAuth();case 6:this.forceUpdate(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),"login_required"!==e.t0.error&&console.log(e.t0.error);case 12:this.setState({checkingSession:!1});case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleSearchClick",value:function(){Object(v.a)("/search")}},{key:"handleSavedClick",value:function(){Object(v.a)("/saved")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(g,{handleSearchClick:this.handleSearchClick,handleSavedClick:this.handleSearchClick}),r.a.createElement(v.b,{exact:!0,path:"/",component:E}),r.a.createElement(v.b,{exact:!0,path:"/callback",component:j}),r.a.createElement(T,{path:"/search",component:x,checkingSession:this.state.checkingSession}),r.a.createElement(T,{path:"/saved",component:w,checkingSession:this.state.checkingSession}))}}]),t}(n.Component),L=Object(v.f)(B);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(o.a,null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[39,1,2]]]);
//# sourceMappingURL=main.36255cdf.chunk.js.map